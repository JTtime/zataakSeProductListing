(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8375:(e,t,l)=>{Promise.resolve().then(l.bind(l,7795))},7795:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>_});var s=l(7437),r=l(2265);let i=(0,r.createContext)(void 0),a=e=>{let{children:t}=e,[l,a]=(0,r.useState)([]),[n,o]=(0,r.useState)([]),[c,d]=(0,r.useState)([0,14e3]),[u,h]=(0,r.useState)([]),[g,x]=(0,r.useState)("Most Popular"),[v,p]=(0,r.useState)(1),[f,j]=(0,r.useState)("sortBy"),[y,m]=(0,r.useState)([]);return(0,s.jsx)(i.Provider,{value:{categories:l,priceRange:c,availability:u,sortBy:g,page:v,products:n,order:f,limit:12,selectedCategories:y,setCategories:a,setPriceRange:d,setAvailability:e=>{h(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},setSortBy:x,setPage:p,setProducts:o,setOrder:j,setSelectedCategories:m},children:t})},n=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useFilterContext must be used within a FilterProvider");return e};var o=l(468),c=l(511),d=l(49),u=l(8038),h=l(5786),g=l(5174),x=l(6548),v=l(8472),p=l(357);let f={local:"http://localhost:3000/",server:"https://dummyjson.com"},j="local"===p.env.REACT_ENV?f.local:f.server;class y{}y.baseURL=j,y.getProductsList=()=>{let e="".concat(y.baseURL,"/products");return v.Z.get(e)},y.getPaginatedProductsList=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l="".concat(y.baseURL,"/products?limit=").concat(e,"&skip=").concat(t);return v.Z.get(l)},y.getProductsListByCategory=e=>{let t="".concat(y.baseURL,"/products/category/").concat(e);return v.Z.get(t)},y.getSortedProductsList=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2?arguments[2]:void 0;if("sortBy"==l)y.getPaginatedProductsList(e,t);else{let s="".concat(y.baseURL,"/products?limit=").concat(e,"&skip=").concat(t,"&sortBy=price&order=").concat(l);return v.Z.get(s)}},y.getProductCategoriesList=()=>{let e="".concat(y.baseURL,"/products/categories");return v.Z.get(e)};let m=()=>{let{categories:e,priceRange:t,availability:l,page:i,limit:a,setCategories:o,setPriceRange:p,setAvailability:f,setProducts:j,products:m,setPage:b,selectedCategories:Z,setSelectedCategories:P}=n(),[L,S]=(0,r.useState)([]),[w,C]=(0,r.useState)([0,14e3]),[k,E]=(0,r.useState)(null);(0,r.useEffect)(()=>{T()},[]);let R=async()=>{try{var e;let t=await v.Z.post("/api/product/",{selectedCategories:Z,limit:a,skip:(i-1)*a,availability:l,priceRange:w});j(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.products)}catch(e){console.error("Error fetching products:",e)}};(0,r.useEffect)(()=>{(Z.length||l.length||2===w.length)&&R()},[Z,i,l,w]);let T=async()=>{try{let e=await y.getProductCategoriesList();(null==e?void 0:e.status)===200&&o(null==e?void 0:e.data)}catch(e){console.error("error fetching categories",e)}},B=e=>{b(1),P(t=>t.includes(e)?(console.log("prev categories",t),t.filter(t=>t!==e)):[...t,e])},_=(e,t)=>{k&&clearTimeout(k),E(setTimeout(()=>{C(t)},1e3)),p(t)};return(0,s.jsxs)("div",{style:{width:"250px",padding:"1rem",marginTop:"5rem"},children:[(0,s.jsx)(c.default,{variant:"h6",children:"Categories"}),(0,s.jsx)(d.Z,{children:null==e?void 0:e.map((e,t)=>(0,s.jsx)(u.Z,{control:(0,s.jsx)(h.Z,{checked:null==Z?void 0:Z.includes(e.slug),onChange:()=>B(e.slug)}),label:e.name},e.slug+t))}),(0,s.jsx)(c.default,{variant:"h6",style:{marginTop:"20px"},children:"Price Range"}),(0,s.jsx)(g.ZP,{value:t,onChange:(e,t)=>_(e,t),valueLabelDisplay:"auto",min:0,max:14e3,valueLabelFormat:e=>"$".concat(e)}),(0,s.jsx)(c.default,{variant:"body2",style:{marginTop:"10px"},children:"$".concat(t[0]," - $").concat(t[1])}),(0,s.jsx)(x.Z,{variant:"outlined",fullWidth:!0,onClick:()=>{let e=[0,14e3];p(e),C(e),b(1)},style:{marginTop:"20px"},children:"Reset Price Range"}),(0,s.jsx)(c.default,{variant:"h6",style:{marginTop:"20px"},children:"Availability"}),(0,s.jsx)(d.Z,{children:["In Stock","Low Stock","Out of Stock"].map(e=>(0,s.jsx)(u.Z,{control:(0,s.jsx)(h.Z,{checked:l.includes(e),onChange:()=>f(e)}),label:e},e))})]})};var b=l(2434),Z=l(270),P=l(1538),L=l(4037),S=l(4696);let w=e=>{let{title:t,category:l,price:r,thumbnail:i}=e;return(0,s.jsxs)(Z.Z,{sx:{maxWidth:280,width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,s.jsx)(P.default,{sx:{height:200,overflow:"hidden",display:"flex",alignItems:"center"},children:(0,s.jsx)(L.Z,{component:"img",image:i,alt:t,sx:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"4px"}})}),(0,s.jsxs)(S.Z,{children:[(0,s.jsx)(c.default,{variant:"body2",color:"text.secondary",children:l}),(0,s.jsx)(c.default,{variant:"h6",component:"div",children:t}),(0,s.jsxs)(c.default,{variant:"body1",color:"primary",children:["$",r]})]})]})},C=e=>{let{products:t}=e;return(0,s.jsx)(P.default,{sx:{margin:"1rem"},children:(0,s.jsx)(b.Z,{container:!0,spacing:2,children:null==t?void 0:t.map((e,t)=>(0,s.jsx)(b.Z,{size:{xs:12,sm:6,md:4,lg:3},sx:{display:"flex"},children:(0,s.jsx)(w,{title:e.title,category:e.category,price:e.price,thumbnail:e.thumbnail})},e.id))})})};var k=l(8644),E=l(4761),R=l(5870);let T=()=>{let{sortBy:e,setSortBy:t,page:l,setPage:i,order:a,setOrder:o,limit:d,setProducts:u}=n(),h=async()=>{try{let t=await y.getSortedProductsList(d,l*d,a);if((null==t?void 0:t.status)===200){var e;u(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.products)}}catch(e){console.error("error fetching sorted Data",e)}};return(0,r.useEffect)(()=>{h()},[a]),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 0"},children:[(0,s.jsx)(c.default,{variant:"subtitle1",children:"Showing Results"}),(0,s.jsx)(k.Z,{children:(0,s.jsxs)(E.Z,{labelId:"sort-select-label",value:a,onChange:e=>o(e.target.value),children:[(0,s.jsx)(R.Z,{value:"sortBy",children:"Sort By"}),(0,s.jsx)(R.Z,{value:"asc",children:"Price: Low to High"}),(0,s.jsx)(R.Z,{value:"desc",children:"Price: High to Low"})]})}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,s.jsx)("button",{onClick:()=>i(l-1),disabled:l<=1,children:"Previous"}),(0,s.jsxs)(c.default,{variant:"body2",style:{margin:"0 10px"},children:["Page ",l]}),(0,s.jsx)("button",{onClick:()=>i(e=>e+1),children:"Next"})]})]})},B=()=>{let[e,t]=(0,r.useState)(!1),{page:l,setPage:i,products:a,setProducts:c,limit:d,order:u,selectedCategories:h}=n();(0,r.useEffect)(()=>{0===h.length&&g(),console.log("products",a)},[l,h]),(0,r.useEffect)(()=>{0===h.length&&i(1)},[h]);let g=async()=>{t(!0);try{var e,s;if("sortBy"===u){let t=await y.getPaginatedProductsList(d,(l-1)*d);(null==t?void 0:t.status)===200&&c(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.products)}else{let e=await y.getSortedProductsList(d,(l-1)*d,u);(null==e?void 0:e.status)===200&&c(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.products)}}catch(e){console.error("Error fetching products List",e)}finally{t(!1)}};return(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsx)(m,{}),(0,s.jsxs)("div",{style:{flex:1,margin:"5rem 0 0 1rem"},children:[(0,s.jsx)(T,{}),e?(0,s.jsx)(o.Z,{}):(0,s.jsx)(C,{products:a})]})]})},_=()=>(0,s.jsx)("div",{children:(0,s.jsx)(a,{children:(0,s.jsx)(B,{})})})}},e=>{var t=t=>e(e.s=t);e.O(0,[758,206,130,215,744],()=>t(8375)),_N_E=e.O()}]);